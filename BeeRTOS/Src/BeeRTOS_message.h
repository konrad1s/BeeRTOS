/******************************************************************************************
 * @brief OS message header file
 * @file BeeRTOS_message.h
 * ****************************************************************************************/

#ifndef __BEERTOS_MESSAGE_H__
#define __BEERTOS_MESSAGE_H__

/******************************************************************************************
 *                                        INCLUDES                                        *
 ******************************************************************************************/

#include "Beertos_internal.h"
#include "BeeRTOS_message_cfg.h"

/******************************************************************************************
 *                                         DEFINES                                        *
 ******************************************************************************************/

/******************************************************************************************
 *                                        TYPEDEFS                                        *
 ******************************************************************************************/

typedef struct
{
    void *buffer;
    uint32_t size;
    uint32_t item_size;
    uint32_t head;
    uint32_t tail;
    uint32_t count;
} os_message_t;

/******************************************************************************************
 *                                    GLOBAL VARIABLES                                    *
 ******************************************************************************************/

/******************************************************************************************
 *                                   FUNCTION PROTOTYPES                                  *
 ******************************************************************************************/

void os_messages_init(void);
bool os_message_send(os_message_id_t id, void *data, uint32_t timeout);
bool os_message_receive(os_message_id_t id, void *data, uint32_t timeout);

#endif /* __BEERTOS_MESSAGE_H__ */